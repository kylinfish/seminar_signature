
{% extends 'base.html' %} 
{% load staticfiles %}
{% block content %}
<style type="text/css">
    .icon{
        width:80px;
        height:80px;
    }
    .table>tfoot>tr>th{
        padding-top:15px;
        border-top:3px solid yellowgreen;
    }
</style>

<div class="container">
    <div class="col-xs-12 col-lg-12 ">
    <h1 class="page-header"><img class="icon" src="{% static 'icon/p6.png'%}"> Seminar 課程</h1>
    <center><h2 style="color:#F92D2D">{{state}}</h2>  </center> 
    {% if list %}
    <table class="table ">
    <thead>
        <tr>
            <th width="7%">Date</th>
            <th class="hidden-xs">Time</th>
            <th>Topic</th>
            <th  width="11%">Speaker</th>
            <th class="text-center" width="20%">Action</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <form accept-charset="UTF-8" action="/" method="post">
                <th width="7%"><input name="date"type="text"  class="form-control" placeholder="4/10" required ></th>
                <th class="hidden-xs"><input name="time" type="text" class="form-control" placeholder="14:00-16:00" required></th>
                <th><input name="topic"type="text" class="form-control" placeholder="Topic" required></th>
                <th  width="9%"><input name="speaker"type="text" class="form-control" ></th>
                <th class="text-center" width="15%"><button type="submit"class="btn btn-warning" >Add a new course </button></th>
            </form>
        </tr>
    </tfoot>
    <tbody >
            {% for unit in list %}
            
            <tr>
                <td class="dateCheck">{{unit.pub_date|date:"m/d"}}</td>
                <td class="hidden-xs">{{unit.time}}</td>
                <td>{{unit.title}}</td>
                <td>{{unit.speaker}}</td>
                <td class="text-center">
                    <form accept-charset="UTF-8" action="remove_unit" method="post">
                        <input  type="text" value="{{unit.pk}}"name="pk" hidden>
                        <a href="signature/{{unit.pk}}"><button class="btn btn-success" >Sign</button> </a>|
                        <a href="list/{{unit.pk}}"><button class="btn btn-primary" >List</button></a>|
                        <button onclick="confirm('注意！刪除後會連簽到紀錄都一併刪除')"type="submit"class="btn btn-danger" >Delete </button>
                    </form>
                </td>
                
            </tr>
            
            {% endfor %}
        </tbody>
        
    </table>
    {% else %}
        <div class="alert alert-warning">Sorry! 目前還沒有任何Seminar課程喔！</div>
    {% endif %}
    </div>
</div>
<script type="text/javascript">
var currDate = Date.parse((new Date()).toDateString());
$(function() {
    $('.dateCheck').each(function(e,val){
        var time = $(val).html();
        var thisYear = new Date().getFullYear();
        time = thisYear +" / "+ time.replace(" / ","/");  
        var txtDate = Date.parse(time);
        if (currDate > txtDate) {
          $(val).parent().css("color","#5cb85c") ;
          $(val).siblings('td').eq(3).children('a').children('button').eq(0).addClass("disabled")
        } else if (currDate == txtDate){
            $(val).parent().css("color","#F2CC37") ;
        }
    });
    
    
});

</script> 
{% endblock %}


